# ==============================================
# Apache Kafka Broker Configuration (KRaft Mode)
# ==============================================

# Kafka broker listening port
KAFKA_BROKER_PORT=9092

# Enable KRaft mode (Kafka Raft Metadata mode, no Zookeeper)
KAFKA_ENABLE_KRAFT=yes

# KRaft cluster ID (generate once via `docker run --rm bitnami/kafka:4.0.0 kafka-storage.sh random-uuid`)
KAFKA_KRAFT_CLUSTER_ID=GyVrBRyET4-GVgDzTjmnxQ

# Kafka process roles (can be broker, controller, or both)
KAFKA_CFG_PROCESS_ROLES=broker,controller

# Unique node ID for this Kafka broker instance (must be unique per broker)
KAFKA_CFG_NODE_ID=1

# Listener names used by the controller (usually CONTROLLER)
KAFKA_CFG_CONTROLLER_LISTENER_NAMES=CONTROLLER

# Controller quorum voters configuration: <nodeId>@<host>:<port>
KAFKA_CFG_CONTROLLER_QUORUM_VOTERS=1@broker:9093

# Kafka listeners configuration: defines protocols and ports Kafka listens on
KAFKA_CFG_LISTENERS=PLAINTEXT://:9092,CONTROLLER://:9093

# Advertised listeners: addresses clients use to connect (use container hostname or IP)
KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://broker:${KAFKA_BROKER_PORT}

# Map listener names to security protocols
KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT

# Allow plaintext communication (set to "yes" only for dev/test environments)
ALLOW_PLAINTEXT_LISTENER=yes

# Explicitly set KRaft mode (alternative to KAFKA_ENABLE_KRAFT)
KAFKA_KRAFT_MODE=true

# Listener used for inter-broker communication
KAFKA_CFG_INTER_BROKER_LISTENER_NAME=PLAINTEXT

# Kafka log directories for storing messages and metadata
KAFKA_CFG_LOG_DIRS=/bitnami/kafka/data
